<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚òÖ‚òÖ‚òÖ THE SLOPULATOR ‚òÖ‚òÖ‚òÖ - COMP ME DADDY LIVE</title>
    <link rel="stylesheet" href="style.css?v=999">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <style>
        /* Inline critical retro styles */
        body {
            background-color: #000;
            color: #0f0;
            font-family: 'Comic Sans MS', 'Chalkboard', 'Papyrus', cursive;
        }
    </style>
</head>
<body>
    <!-- MIDI Music Placeholder -->
    <div id="midi-player" style="display:none;">
        <!-- Background MIDI would go here -->
    </div>

    <!-- Bouncing Emojis Container -->
    <div id="bouncing-emojis"></div>

    <!-- Sparkle Container -->
    <div id="sparkles"></div>

    <!-- Main Table Layout (90s Style) -->
    <table border="0" cellpadding="0" cellspacing="0" width="100%" class="main-table">
        <tr>
            <td align="center">
                
                <!-- SLOPULATOR LOGO -->
                <table border="0" cellpadding="20" cellspacing="0" width="95%">
                    <tr>
                        <td align="center">
                            <div style="display:inline-block; border:8px ridge #FF00FF; padding:30px; background:linear-gradient(180deg, #000033 0%, #330033 50%, #000033 100%); box-shadow:0 0 50px #FF00FF;">
                                <font face="Comic Sans MS" color="#00FFFF" size="7" style="text-shadow:4px 4px 8px #FF00FF, -4px -4px 8px #00FFFF;">
                                    <b>‚òÖ THE SLOPULATOR ‚òÖ</b>
                                </font>
                                <br><br>
                                <font face="Papyrus" color="#FFFF00" size="4">
                                    <blink>üè† Property Analysis Tool üí∞</blink>
                                </font>
                                <br><br>
                                <font face="Courier New" color="#00FF00" size="2">
                                    [v2.0 - Now with Comp Me Daddy!]
                                </font>
                            </div>
                        </td>
                    </tr>
                </table>

                <br>

                <!-- MAIN CONTENT AREA -->
                <table border="10" cellpadding="15" cellspacing="5" width="95%" class="content-table" bgcolor="#000033">
                    
                    <!-- Property Search Section -->
                    <tr>
                        <td bgcolor="#330033" style="border: 5px ridge #FF00FF; position: relative;">
                            <font face="Comic Sans MS" color="#00FFFF" size="5">
                                <b>üîç ENTER PROPERTY ADDRESS üîç</b>
                            </font>
                            <br><br>
                            <div class="search-container" style="position: relative; display: inline-block; width: 100%;">
                                <input type="text" id="addressInput" class="retro-input" placeholder="e.g., 123 Main St, Austin, TX" size="50" autocomplete="off" oninput="handleAddressInput(this.value)">
                                <div id="addressSuggestions" class="suggestions" style="left: 50%; transform: translateX(-50%); width: 90%; max-width: 500px;"></div>
                            </div>
                            <script>
                                // Real address autocomplete using OpenStreetMap
                                let acTimeout;
                                function handleAddressInput(value) {
                                    clearTimeout(acTimeout);
                                    const el = document.getElementById('addressSuggestions');
                                    if (value.length < 3) { el.style.display = 'none'; return; }
                                    
                                    acTimeout = setTimeout(async () => {
                                        try {
                                            const response = await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(value)}&format=json&addressdetails=1&limit=5&countrycodes=us`, {
                                                headers: { 'User-Agent': 'Slopulator/1.0' }
                                            });
                                            
                                            if (!response.ok) throw new Error('Search failed');
                                            
                                            const data = await response.json();
                                            
                                            if (data && data.length > 0) {
                                                el.innerHTML = data.map(place => 
                                                    `<div style="padding:10px;cursor:pointer;color:#0f0;border-bottom:1px solid #030;text-align:left;" onclick="selectAddress('${place.display_name.replace(/'/g, "\\'")}', ${place.lat}, ${place.lon})">${place.display_name}</div>`
                                                ).join('');
                                                el.style.display = 'block';
                                            } else {
                                                el.style.display = 'none';
                                            }
                                        } catch (err) {
                                            console.error('Autocomplete error:', err);
                                            el.style.display = 'none';
                                        }
                                    }, 300);
                                }
                                
                                function formatShortAddress(fullAddress) {
                                    // OpenStreetMap format: "925, South 3rd Street, Chickasha, Grady County, Oklahoma, 73018, United States"
                                    // We want: "925 S 3rd St, Chickasha, OK"
                                    const parts = fullAddress.split(',').map(p => p.trim());
                                    
                                    // State name to abbreviation mapping
                                    const stateMap = {
                                        'Alabama': 'AL', 'Alaska': 'AK', 'Arizona': 'AZ', 'Arkansas': 'AR', 'California': 'CA',
                                        'Colorado': 'CO', 'Connecticut': 'CT', 'Delaware': 'DE', 'Florida': 'FL', 'Georgia': 'GA',
                                        'Hawaii': 'HI', 'Idaho': 'ID', 'Illinois': 'IL', 'Indiana': 'IN', 'Iowa': 'IA',
                                        'Kansas': 'KS', 'Kentucky': 'KY', 'Louisiana': 'LA', 'Maine': 'ME', 'Maryland': 'MD',
                                        'Massachusetts': 'MA', 'Michigan': 'MI', 'Minnesota': 'MN', 'Mississippi': 'MS', 'Missouri': 'MO',
                                        'Montana': 'MT', 'Nebraska': 'NE', 'Nevada': 'NV', 'New Hampshire': 'NH', 'New Jersey': 'NJ',
                                        'New Mexico': 'NM', 'New York': 'NY', 'North Carolina': 'NC', 'North Dakota': 'ND', 'Ohio': 'OH',
                                        'Oklahoma': 'OK', 'Oregon': 'OR', 'Pennsylvania': 'PA', 'Rhode Island': 'RI', 'South Carolina': 'SC',
                                        'South Dakota': 'SD', 'Tennessee': 'TN', 'Texas': 'TX', 'Utah': 'UT', 'Vermont': 'VT',
                                        'Virginia': 'VA', 'Washington': 'WA', 'West Virginia': 'WV', 'Wisconsin': 'WI', 'Wyoming': 'WY'
                                    };
                                    
                                    // Find state and city by looking backwards from the end
                                    let state = '';
                                    let stateIndex = -1;
                                    let city = '';
                                    
                                    for (let i = parts.length - 1; i >= 0; i--) {
                                        const part = parts[i];
                                        // Check for 2-letter state code
                                        if (/^[A-Z]{2}$/.test(part)) {
                                            state = part;
                                            stateIndex = i;
                                            break;
                                        }
                                        // Check for full state name
                                        if (stateMap[part]) {
                                            state = stateMap[part];
                                            stateIndex = i;
                                            break;
                                        }
                                    }
                                    
                                    // City is usually right before state (or 2 positions before if there's a county)
                                    if (stateIndex > 0) {
                                        city = parts[stateIndex - 1];
                                        // Skip county names (they usually contain "County")
                                        if (city.includes('County') && stateIndex > 1) {
                                            city = parts[stateIndex - 2];
                                        }
                                    }
                                    
                                    // Street is everything before city
                                    let street = '';
                                    const cityIndex = parts.indexOf(city);
                                    if (cityIndex > 0) {
                                        street = parts.slice(0, cityIndex).join(', ');
                                    } else if (parts.length > 0) {
                                        street = parts[0];
                                    }
                                    
                                    // Clean up street abbreviations
                                    street = street
                                        .replace(/Street/g, 'St')
                                        .replace(/Avenue/g, 'Ave')
                                        .replace(/Road/g, 'Rd')
                                        .replace(/Drive/g, 'Dr')
                                        .replace(/Boulevard/g, 'Blvd')
                                        .replace(/Lane/g, 'Ln')
                                        .replace(/North/g, 'N')
                                        .replace(/South/g, 'S')
                                        .replace(/East/g, 'E')
                                        .replace(/West/g, 'W');
                                    
                                    if (street && city && state) {
                                        return `${street}, ${city}, ${state}`;
                                    }
                                    
                                    return fullAddress;
                                }
                                
                                const RENTCAST_KEY = 'c5ad833affcf4a648df2ca97b5a870ff';
                                
                                function showPropertyImage(propertyData) {
                                    const imgContainer = document.getElementById('propertyImageContainer');
                                    const imgEl = document.getElementById('propertyImage');
                                    
                                    if (!imgContainer || !imgEl) return;
                                    
                                    // Try RentCast images first
                                    const rentCastImg = propertyData?.images?.[0]?.url || 
                                                       propertyData?.imageUrl || 
                                                       propertyData?.primaryImageUrl || 
                                                       propertyData?.photoUrl || 
                                                       propertyData?.image || 
                                                       propertyData?.thumbnail || 
                                                       propertyData?.photo;
                                    
                                    if (rentCastImg) {
                                        // Switch to img element for RentCast images
                                        imgEl.outerHTML = '<img id="propertyImage" src="" alt="Property Exterior" style="max-width:100%; border:5px groove #FF00FF; border-radius:10px;">';
                                        const newImg = document.getElementById('propertyImage');
                                        newImg.src = rentCastImg;
                                        imgContainer.style.display = 'block';
                                        return;
                                    }
                                    
                                    // Use OpenStreetMap embed using stored coordinates
                                    if (window.selectedLat && window.selectedLon) {
                                        const lat = parseFloat(window.selectedLat);
                                        const lon = parseFloat(window.selectedLon);
                                        // Use OpenStreetMap's standard export/embed URL
                                        const bbox = `${(lon-0.002).toFixed(6)}%2C${(lat-0.002).toFixed(6)}%2C${(lon+0.002).toFixed(6)}%2C${(lat+0.002).toFixed(6)}`;
                                        const mapUrl = `https://www.openstreetmap.org/export/embed.html?bbox=${bbox}&layer=mapnik&marker=${lat}%2C${lon}`;
                                        
                                        // Ensure we have an iframe
                                        if (imgEl.tagName !== 'IFRAME') {
                                            imgEl.outerHTML = '<iframe id="propertyImage" src="" width="400" height="300" style="border:5px groove #FF00FF; border-radius:10px; max-width:100%;" frameborder="0" scrolling="no"></iframe>';
                                        }
                                        const newIframe = document.getElementById('propertyImage');
                                        newIframe.src = mapUrl;
                                        imgContainer.style.display = 'block';
                                        return;
                                    }
                                    
                                    // Hide if no image available
                                    imgContainer.style.display = 'none';
                                }
                                
                                function clearAllFields() {
                                    document.getElementById('zestimate').value = '';
                                    document.getElementById('priceRangeLow').value = '';
                                    document.getElementById('priceRangeHigh').value = '';
                                    document.getElementById('rentRangeLow').value = '';
                                    document.getElementById('rentRangeHigh').value = '';
                                    document.getElementById('sqft').value = '';
                                    document.getElementById('monthlyTaxes').value = '';
                                    document.getElementById('annualInsurance').value = '';
                                    document.getElementById('yearBuilt').value = '';
                                    document.getElementById('lastSalePrice').value = '';
                                    document.getElementById('lastSaleDate').value = '';
                                    const imgContainer = document.getElementById('propertyImageContainer');
                                    if (imgContainer) imgContainer.style.display = 'none';
                                }
                                
                                async function loadRentCastData(address) {
                                    try {
                                        // Clear all fields first
                                        clearAllFields();
                                        
                                        // Fetch AVM value data
                                        const response = await fetch(`https://api.rentcast.io/v1/avm/value?address=${encodeURIComponent(address)}`, {
                                            headers: { 'X-Api-Key': RENTCAST_KEY, 'Accept': 'application/json' }
                                        });
                                        
                                        if (response.ok) {
                                            const data = await response.json();
                                            document.getElementById('zestimate').value = data.price || '';
                                            document.getElementById('priceRangeLow').value = data.priceRangeLow || data.price || '';
                                            document.getElementById('priceRangeHigh').value = data.priceRangeHigh || data.price || '';
                                        }
                                        
                                        // Fetch rent estimate data
                                        const rentResponse = await fetch(`https://api.rentcast.io/v1/avm/rent/long-term?address=${encodeURIComponent(address)}`, {
                                            headers: { 'X-Api-Key': RENTCAST_KEY, 'Accept': 'application/json' }
                                        });
                                        
                                        if (rentResponse.ok) {
                                            const rentData = await rentResponse.json();
                                            document.getElementById('rentRangeLow').value = rentData.rentRangeLow || '';
                                            document.getElementById('rentRangeHigh').value = rentData.rentRangeHigh || '';
                                            // Calculate average rent for Property Details section
                                            if (rentData.rentRangeLow && rentData.rentRangeHigh) {
                                                const avgRent = Math.round((rentData.rentRangeLow + rentData.rentRangeHigh) / 2);
                                                document.getElementById('rentEstimate').value = avgRent;
                                            } else if (rentData.rent) {
                                                document.getElementById('rentEstimate').value = rentData.rent;
                                            } else {
                                                document.getElementById('rentEstimate').placeholder = 'N/A';
                                            }
                                        } else {
                                            // Rent API returned error - mark as unavailable
                                            document.getElementById('rentRangeLow').placeholder = 'N/A';
                                            document.getElementById('rentRangeHigh').placeholder = 'N/A';
                                            document.getElementById('rentEstimate').placeholder = 'N/A';
                                        }
                                        
                                        // Fetch property details for sqft, taxes, year built, sale history, image
                                        const propResponse = await fetch(`https://api.rentcast.io/v1/properties?address=${encodeURIComponent(address)}&limit=1`, {
                                            headers: { 'X-Api-Key': RENTCAST_KEY, 'Accept': 'application/json' }
                                        });
                                        
                                        if (propResponse.ok) {
                                            const propData = await propResponse.json();
                                            console.log('Property API response:', propData);
                                            
                                            // Handle both array and object responses
                                            let p = propData;
                                            if (Array.isArray(propData) && propData.length > 0) {
                                                p = propData[0];
                                            }
                                            
                                            if (p) {
                                                console.log('Processing property:', p);
                                                
                                                // squareFootage from API
                                                const sqft = p.squareFootage || '';
                                                console.log('Setting sqft to:', sqft);
                                                document.getElementById('sqft').value = sqft;
                                                if (!sqft) document.getElementById('sqft').placeholder = 'N/A';
                                                
                                                // yearBuilt from API
                                                console.log('Setting yearBuilt to:', p.yearBuilt);
                                                document.getElementById('yearBuilt').value = p.yearBuilt || '';
                                                if (!p.yearBuilt) document.getElementById('yearBuilt').placeholder = 'N/A';
                                                
                                                // propertyTaxes from API - nested by year, get most recent
                                                let hasTaxes = false;
                                                console.log('Checking propertyTaxes:', p.propertyTaxes);
                                                if (p.propertyTaxes) {
                                                    const taxYears = Object.keys(p.propertyTaxes).sort().reverse();
                                                    console.log('Tax years found:', taxYears);
                                                    if (taxYears.length > 0) {
                                                        const latestTax = p.propertyTaxes[taxYears[0]];
                                                        console.log('Latest tax:', latestTax);
                                                        if (latestTax?.total) {
                                                            const monthlyTax = Math.round(latestTax.total / 12);
                                                            console.log('Setting monthlyTaxes to:', monthlyTax);
                                                            document.getElementById('monthlyTaxes').value = monthlyTax;
                                                            hasTaxes = true;
                                                        }
                                                    }
                                                }
                                                if (!hasTaxes) document.getElementById('monthlyTaxes').placeholder = 'N/A';
                                                
                                                // Calculate insurance based on sqft ($0.50 per sqft annually)
                                                if (sqft) {
                                                    const insurance = Math.round(sqft * 0.5);
                                                    console.log('Setting annualInsurance to:', insurance);
                                                    document.getElementById('annualInsurance').value = insurance;
                                                } else {
                                                    document.getElementById('annualInsurance').placeholder = 'N/A';
                                                }
                                                
                                                // Find most recent sale from history (object with date keys)
                                                let hasSaleHistory = false;
                                                console.log('Checking history:', p.history);
                                                if (p.history && typeof p.history === 'object') {
                                                    const sales = Object.values(p.history).filter(h => h.event === 'Sale');
                                                    console.log('Sales found:', sales);
                                                    if (sales.length > 0) {
                                                        // Sort by date descending and get most recent
                                                        sales.sort((a, b) => new Date(b.date) - new Date(a.date));
                                                        const lastSale = sales[0];
                                                        console.log('Setting lastSalePrice to:', lastSale.price);
                                                        console.log('Setting lastSaleDate to:', lastSale.date);
                                                        document.getElementById('lastSalePrice').value = lastSale.price || '';
                                                        document.getElementById('lastSaleDate').value = lastSale.date ? lastSale.date.split('T')[0] : '';
                                                        hasSaleHistory = true;
                                                    }
                                                }
                                                if (!hasSaleHistory) {
                                                    // Fallback to lastSalePrice/Date fields if available
                                                    console.log('Falling back to lastSalePrice/Date fields:', p.lastSalePrice, p.lastSaleDate);
                                                    if (p.lastSalePrice) {
                                                        document.getElementById('lastSalePrice').value = p.lastSalePrice;
                                                        document.getElementById('lastSaleDate').value = p.lastSaleDate ? p.lastSaleDate.split('T')[0] : '';
                                                    } else {
                                                        document.getElementById('lastSalePrice').placeholder = 'N/A';
                                                        document.getElementById('lastSaleDate').placeholder = 'N/A';
                                                    }
                                                }
                                                
                                                // Show property exterior image
                                                showPropertyImage(p);
                                            }
                                        }
                                    } catch (err) {
                                        console.error('RentCast error:', err);
                                    }
                                }
                                
                                function selectAddress(addr, lat, lon) {
                                    const shortAddr = formatShortAddress(addr);
                                    console.log('Original address:', addr);
                                    console.log('Formatted address:', shortAddr);
                                    document.getElementById('addressInput').value = shortAddr;
                                    document.getElementById('addressSuggestions').style.display = 'none';
                                    // Store coordinates for image lookup
                                    window.selectedLat = lat;
                                    window.selectedLon = lon;
                                    // Load data immediately
                                    loadRentCastData(shortAddr);
                                }
                                
                                // Hide on click outside
                                document.addEventListener('click', function(e) {
                                    if (!e.target.closest('.search-container')) {
                                        document.getElementById('addressSuggestions').style.display = 'none';
                                    }
                                });
                            </script>
                            <br><br>
                            <button id="searchBtn" class="retro-button">
                                <b>üîé SEARCH NOW!!! üîé</b>
                            </button>
                            <br><br>
                            <br><br>
                            <button id="compMeDaddyBtn" class="retro-button-comp" style="background: linear-gradient(45deg, #FF00FF, #00FFFF);" onclick="const addr = document.getElementById('addressInput').value; console.log('Comp Me Daddy clicked with address:', addr); window.currentAddress = addr; document.getElementById('compMeDaddyPage').style.display='block'; document.body.style.overflow='hidden'; document.getElementById('compMeDaddyAddress').value = addr; if(addr && addr.length > 5) { setTimeout(function() { window.runCompMeDaddyAnalysis(); }, 500); }">
                                <marquee behavior="alternate" scrollamount="5" width="200">
                                    <b>üíé COMP ME DADDY üíé</b>
                                </marquee>
                            </button>
                        </td>
                    </tr>

                    <tr><td>&nbsp;</td></tr>

                    <!-- API Data Section (MOVED UP) -->
                    <tr>
                        <td bgcolor="#003300" style="border: 5px groove #00FF00;">
                            <font face="Comic Sans MS" color="#FFFF00" size="4">
                                <b>üìä API DATA (AUTO-MAGICAL!) üìä</b>
                            </font>
                            <br>
                            <font face="Courier New" color="#00FF00" size="2">
                                <blink>‚òÖ CLICK TO EDIT IF YOU KNOW BETTER! ‚òÖ</blink>
                            </font>
                            <br><br>

                            <table border="2" cellpadding="8" cellspacing="0" width="100%" class="input-table">
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#FF9900"><b>RentCast AVM ($):</b></font>
                                    </td>
                                    <td bgcolor="#000000">
                                        <input type="number" id="zestimate" class="retro-input-small api-field" placeholder="Auto-populated">
                                    </td>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#FF9900"><b>Price Range Low ($):</b></font>
                                    </td>
                                    <td bgcolor="#000000">
                                        <input type="number" id="priceRangeLow" class="retro-input-small api-field" placeholder="Auto-populated">
                                    </td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#FF9900"><b>Price Range High ($):</b></font>
                                    </td>
                                    <td bgcolor="#000000">
                                        <input type="number" id="priceRangeHigh" class="retro-input-small api-field" placeholder="Auto-populated">
                                    </td>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#FF9900"><b>Rent Range Low ($):</b></font>
                                    </td>
                                    <td bgcolor="#000000">
                                        <input type="number" id="rentRangeLow" class="retro-input-small api-field" placeholder="Auto-populated">
                                    </td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#FF9900"><b>Rent Range High ($):</b></font>
                                    </td>
                                    <td bgcolor="#000000">
                                        <input type="number" id="rentRangeHigh" class="retro-input-small api-field" placeholder="Auto-populated">
                                    </td>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#FF9900"><b>Property Sqft:</b></font>
                                    </td>
                                    <td bgcolor="#000000">
                                        <input type="number" id="sqft" class="retro-input-small api-field" placeholder="Auto-populated">
                                    </td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#FF9900"><b>Monthly Taxes ($):</b></font>
                                    </td>
                                    <td bgcolor="#000000">
                                        <input type="number" id="monthlyTaxes" class="retro-input-small api-field" placeholder="Auto-populated">
                                    </td>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#FF9900"><b>Annual Insurance ($):</b></font>
                                    </td>
                                    <td bgcolor="#000000">
                                        <input type="number" id="annualInsurance" class="retro-input-small api-field" placeholder="Auto from sqft">
                                    </td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#FF9900"><b>Year Built:</b></font>
                                    </td>
                                    <td bgcolor="#000000">
                                        <input type="number" id="yearBuilt" class="retro-input-small api-field" placeholder="Auto-populated">
                                    </td>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#FF9900"><b>Last Sale Price ($):</b></font>
                                    </td>
                                    <td bgcolor="#000000">
                                        <input type="number" id="lastSalePrice" class="retro-input-small api-field" placeholder="Auto-populated">
                                    </td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#FF9900"><b>Last Sale Date:</b></font>
                                    </td>
                                    <td bgcolor="#000000">
                                        <input type="text" id="lastSaleDate" class="retro-input-small api-field" placeholder="Auto-populated">
                                    </td>
                                    <td bgcolor="#663300"></td>
                                    <td bgcolor="#000000"></td>
                                </tr>
                            </table>
                            
                            <!-- Property Exterior Image -->
                            <br>
                            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                                <tr>
                                    <td align="center">
                                        <div id="propertyImageContainer" style="display:none; max-width:400px; margin:0 auto;">
                                            <iframe id="propertyImage" src="" width="400" height="300" style="border:5px groove #FF00FF; border-radius:10px; max-width:100%;" frameborder="0" scrolling="no"></iframe>
                                            <br>
                                            <font face="Courier New" color="#00FF00" size="1">
                                                <i>üì∏ Property Location</i>
                                            </font>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>

                    <tr><td>&nbsp;</td></tr>

                    <!-- Property Details Section -->
                    <tr>
                        <td bgcolor="#003300" style="border: 5px groove #00FF00;">
                            <font face="Papyrus" color="#FF00FF" size="5">
                                <b>üíµ PROPERTY DETAILS üíµ</b>
                            </font>
                            <br><br>
                            
                            <table border="2" cellpadding="8" cellspacing="0" width="100%" class="input-table">
                                <tr>
                                    <td bgcolor="#000066" align="right">
                                        <font color="#00FFFF"><b>Purchase Price ($):</b></font>
                                    </td>
                                    <td bgcolor="#000000">
                                        <input type="number" id="purchasePrice" class="retro-input-small" placeholder="0">
                                    </td>
                                    <td bgcolor="#000066" align="right">
                                        <font color="#00FFFF"><b>Repair Costs ($):</b></font>
                                    </td>
                                    <td bgcolor="#000000">
                                        <input type="number" id="repairCost" class="retro-input-small" placeholder="0">
                                    </td>
                                </tr>
                                <tr>
                                    <td bgcolor="#000066" align="right">
                                        <font color="#00FFFF"><b>Interest Rate (%):</b></font>
                                    </td>
                                    <td bgcolor="#000000">
                                        <input type="number" id="interestRate" class="retro-input-small" value="6.8" step="0.1">
                                    </td>
                                    <td bgcolor="#000066" align="right">
                                        <font color="#00FFFF"><b>Loan Term (years):</b></font>
                                    </td>
                                    <td bgcolor="#000000">
                                        <input type="number" id="loanTerm" class="retro-input-small" value="20" step="1">
                                    </td>
                                </tr>
                                <tr>
                                    <td bgcolor="#000066" align="right">
                                        <font color="#00FFFF"><b>Monthly Rent Est ($):</b></font>
                                    </td>
                                    <td bgcolor="#000000">
                                        <input type="number" id="rentEstimate" class="retro-input-small api-field" placeholder="Auto from rent range">
                                    </td>
                                    <td bgcolor="#000066"></td>
                                    <td bgcolor="#000000"></td>
                                </tr>
                            </table>

                            <br><br>

                            <button id="calculateBtn" class="retro-button-calculate" onclick="console.log('Calculate clicked'); if(window.runCalculations) { window.runCalculations(); } else { alert('Error: Analysis function not loaded. Please refresh the page.'); }">
                                <marquee behavior="alternate" scrollamount="3" width="100%" style="background: transparent;">
                                    <b>üßÆ CALCULATE ANALYSIS!!! üßÆ</b>
                                </marquee>
                            </button>

                            <br><br>

                            <!-- Saved Evaluations Buttons -->
                            <table border="0" cellpadding="5" cellspacing="5" align="center">
                                <tr>
                                    <td>
                                        <button id="loadEvalBtn" class="retro-button-small">
                                            <b>üìÇ LOAD EVAL</b>
                                        </button>
                                    </td>
                                    <td>
                                        <button id="saveEvalBtn" class="retro-button-small">
                                            <b>üíæ SAVE EVAL</b>
                                        </button>
                                    </td>
                                    <td>
                                        <button id="printBtn" class="retro-button-small">
                                            <b>üñ®Ô∏è PRINT</b>
                                        </button>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>

                    <tr><td>&nbsp;</td></tr>

                    <!-- Deal Analysis Section -->
                    <tr id="dealAnalysisSection" style="display: none;">
                        <td bgcolor="#1a1a2e" style="border: 5px groove #ffd700;">
                            <font face="Comic Sans MS" color="#ffd700" size="5">
                                <b>üìä COMPREHENSIVE DEAL ANALYSIS üìä</b>
                            </font>
                            <br>
                            <font face="Courier New" color="#00ff00" size="2">
                                <blink>‚òÖ FLIP vs RENTAL BREAKDOWN ‚òÖ</blink>
                            </font>
                            <br><br>

                            <!-- Flip Analysis -->
                            <table border="2" cellpadding="8" cellspacing="0" width="100%" class="input-table" style="margin-bottom: 20px;">
                                <tr bgcolor="#330000">
                                    <td colspan="2" align="center">
                                        <font face="Papyrus" color="#ff6b6b" size="4">
                                            <b>üî® FLIP ANALYSIS (6 Month Hold) üî®</b>
                                        </font>
                                    </td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right" width="50%">
                                        <font color="#ff9900"><b>Purchase Price:</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="flipPurchasePrice"></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#ff9900"><b>Repair Costs:</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="flipRepairCosts"></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#ff9900"><b>Total Investment:</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="flipTotalInvestment"></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#ff9900"><b>Holding Costs (8% Interest Only):</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="flipHoldingCosts"></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#ff9900"><b>Closing/Broker Fees (~6%):</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="flipClosingCosts"></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#ff9900"><b>Total Costs:</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="flipTotalCosts"></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#ff9900"><b>ARV (RentCast AVM):</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="flipARV"></td>
                                </tr>
                                <tr bgcolor="#003300">
                                    <td bgcolor="#003300" align="right">
                                        <font color="#00ff00" size="4"><b>üìà ESTIMATED PROFIT:</b></font>
                                    </td>
                                    <td bgcolor="#003300" id="flipProfit" style="font-size: 18px; font-weight: bold;"></td>
                                </tr>
                            </table>

                            <!-- Rental Analysis -->
                            <table border="2" cellpadding="8" cellspacing="0" width="100%" class="input-table" style="margin-bottom: 20px;">
                                <tr bgcolor="#001a33">
                                    <td colspan="2" align="center">
                                        <font face="Papyrus" color="#4ecdc4" size="4">
                                            <b>üè† RENTAL ANALYSIS (BRRR Strategy) üè†</b>
                                        </font>
                                    </td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right" width="50%">
                                        <font color="#ff9900"><b>Total Loan Amount (Price + Repairs):</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="rentalLoanAmount"></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#ff9900"><b>Interest Rate:</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="rentalInterestRate"></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#ff9900"><b>Loan Term:</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="rentalLoanTerm"></td>
                                </tr>
                                <tr bgcolor="#000066">
                                    <td bgcolor="#000066" align="right">
                                        <font color="#00ffff" size="3"><b>üìä PITI BREAKDOWN:</b></font>
                                    </td>
                                    <td bgcolor="#000066"></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#ff9900"><b>Principal & Interest (P&I):</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="rentalPI"></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#ff9900"><b>Monthly Taxes:</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="rentalTaxes"></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#ff9900"><b>Monthly Insurance:</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="rentalInsurance"></td>
                                </tr>
                                <tr bgcolor="#003300">
                                    <td bgcolor="#003300" align="right">
                                        <font color="#00ff00" size="3"><b>üí∞ TOTAL PITI:</b></font>
                                    </td>
                                    <td bgcolor="#003300" id="rentalPITI" style="font-size: 16px; font-weight: bold;"></td>
                                </tr>
                                <tr><td colspan="2" bgcolor="#000000" height="5"></td></tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#ff9900"><b>RentCast AVM:</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="rentalAVM"></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#ff9900"><b>Current LTV:</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="rentalCurrentLTV"></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#ff9900"><b>Monthly Rent Estimate (95% Occ):</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="rentalMonthlyRent"></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#ff9900"><b>Effective Monthly Rent:</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="rentalEffectiveRent"></td>
                                </tr>
                                <tr bgcolor="#003300">
                                    <td bgcolor="#003300" align="right">
                                        <font color="#00ff00" size="3"><b>üíµ MONTHLY CASH FLOW:</b></font>
                                    </td>
                                    <td bgcolor="#003300" id="rentalCashFlow" style="font-size: 16px; font-weight: bold;"></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#ff9900"><b>Annual Cash Flow:</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="rentalAnnualCashFlow"></td>
                                </tr>
                            </table>

                            <!-- BRRR Analysis -->
                            <table border="2" cellpadding="8" cellspacing="0" width="100%" class="input-table" style="margin-bottom: 20px;">
                                <tr bgcolor="#1a0033">
                                    <td colspan="2" align="center">
                                        <font face="Papyrus" color="#ff00ff" size="4">
                                            <b>üîÑ BRRR ANALYSIS (Refinance @ 80% LTV) üîÑ</b>
                                        </font>
                                    </td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right" width="50%">
                                        <font color="#ff9900"><b>Max Refinance Amount (80% of AVM):</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="brrrMaxRefi"></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#ff9900"><b>Total Cash Invested:</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="brrrCashInvested"></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#663300" align="right">
                                        <font color="#ff9900"><b>Cash Left in Deal:</b></font>
                                    </td>
                                    <td bgcolor="#000000" id="brrrCashLeft"></td>
                                </tr>
                                <tr bgcolor="#003300">
                                    <td bgcolor="#003300" align="right">
                                        <font color="#00ff00" size="3"><b>‚úÖ 100% PULL-OUT POSSIBLE?</b></font>
                                    </td>
                                    <td bgcolor="#003300" id="brrrPulloutPossible" style="font-size: 16px; font-weight: bold;"></td>
                                </tr>
                            </table>

                            <!-- Deal Rating -->
                            <table border="3" cellpadding="12" cellspacing="0" width="100%" style="border-color: #ffd700;">
                                <tr bgcolor="#000000">
                                    <td align="center">
                                        <font face="Comic Sans MS" color="#ffd700" size="5">
                                            <b>üèÜ DEAL RATING üèÜ</b>
                                        </font>
                                        <br><br>
                                        <font face="Papyrus" size="6" id="dealRating" style="text-shadow: 2px 2px 4px #000;">
                                            <b>--</b>
                                        </font>
                                        <br><br>
                                        <font face="Courier New" color="#00ff00" size="3" id="dealRecommendation">
                                            <b>--</b>
                                        </font>
                                        <br><br>
                                        <div id="dealActionPlan" style="background: #001a33; padding: 15px; border: 2px solid #00ff00; margin-top: 10px; text-align: left;">
                                            <font face="Courier New" color="#ffffff" size="2" id="actionPlanText">
                                                --
                                            </font>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>

                    <tr><td>&nbsp;</td></tr>

                    <!-- Comps Section -->
                    <tr id="compsSection" style="display: none;">
                        <td bgcolor="#330000" style="border: 5px ridge #FF0000;">
                            <font face="Comic Sans MS" color="#FF6666" size="5">
                                <b>üèòÔ∏è RECENT COMPS (SAME BLOCK) üèòÔ∏è</b>
                            </font>
                            <br><br>
                            <table border="3" cellpadding="8" cellspacing="0" width="100%" class="comps-table" id="compsTable">
                                <thead>
                                    <tr bgcolor="#660000">
                                        <th><font color="#FFFF00">Address</font></th>
                                        <th><font color="#FFFF00">Sale Price</font></th>
                                        <th><font color="#FFFF00">Date</font></th>
                                        <th><font color="#FFFF00">Beds</font></th>
                                        <th><font color="#FFFF00">Baths</font></th>
                                        <th><font color="#FFFF00">SqFt</font></th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </td>
                    </tr>

                    <tr><td>&nbsp;</td></tr>

                    <!-- ARV Section -->
                    <tr id="arvSection" style="display: none;">
                        <td bgcolor="#000033" align="center" style="border: 8px double #00FFFF;">
                            <font face="Papyrus" color="#FFFF00" size="6">
                                <b>üíé AFTER REPAIR VALUE (ARV) üíé</b>
                            </font>
                            <br><br>
                            <div id="arvValue" class="big-blinking-number">$0</div>
                            <br>
                            <font face="Courier New" color="#00FF00" size="2">
                                Weighted avg: 30% Zillow + 30% Realtor + 40% Comps
                            </font>
                        </td>
                    </tr>

                    <tr><td>&nbsp;</td></tr>

                    <!-- Analysis Results Section -->
                    <tr id="resultsSection" style="display: none;">
                        <td>
                            <table border="0" cellpadding="0" cellspacing="10" width="100%">
                                <tr>
                                    <!-- Rental Analysis -->
                                    <td width="50%" valign="top">
                                        <table border="5" cellpadding="10" cellspacing="0" width="100%" bgcolor="#003300" style="border-color: #00FF00;">
                                            <tr>
                                                <td align="center" bgcolor="#006600">
                                                    <font face="Comic Sans MS" color="#FFFF00" size="5">
                                                        <b>üìà RENTAL ANALYSIS üìà</b>
                                                    </font>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <table border="0" cellpadding="5" cellspacing="0" width="100%" class="results-table">
                                                        <tr>
                                                            <td><font color="#00FFFF">Monthly Rent (100%):</font></td>
                                                            <td align="right"><font color="#00FF00" id="rentalGross">$0</font></td>
                                                        </tr>
                                                        <tr>
                                                            <td><font color="#00FFFF">Effective (90% occ.):</font></td>
                                                            <td align="right"><font color="#00FF00" id="rentalEffective">$0</font></td>
                                                        </tr>
                                                        <tr><td colspan="2"><hr color="#00FF00"></td></tr>
                                                        <tr>
                                                            <td><font color="#FF6666">Mortgage Payment:</font></td>
                                                            <td align="right"><font color="#FF0000" id="rentalMortgage">-$0</font></td>
                                                        </tr>
                                                        <tr>
                                                            <td><font color="#FF6666">Property Taxes:</font></td>
                                                            <td align="right"><font color="#FF0000" id="rentalTaxes">-$0</font></td>
                                                        </tr>
                                                        <tr>
                                                            <td><font color="#FF6666">Insurance:</font></td>
                                                            <td align="right"><font color="#FF0000" id="rentalInsurance">-$0</font></td>
                                                        </tr>
                                                        <tr>
                                                            <td><font color="#FF6666">Maintenance (5%):</font></td>
                                                            <td align="right"><font color="#FF0000" id="rentalMaintenance">-$0</font></td>
                                                        </tr>
                                                        <tr><td colspan="2"><hr color="#00FF00"></td></tr>
                                                        <tr>
                                                            <td><font color="#FFFF00"><b>Total Expenses:</b></font></td>
                                                            <td align="right"><font color="#FF0000" id="rentalTotalExpenses">-$0</font></td>
                                                        </tr>
                                                        <tr bgcolor="#006600">
                                                            <td><font color="#FFFF00"><b>‚òÖ MONTHLY CASHFLOW ‚òÖ</b></font></td>
                                                            <td align="right"><font size="5" color="#00FF00"><b id="rentalCashflow">$0</b></font></td>
                                                        </tr>
                                                        <tr>
                                                            <td><font color="#00FFFF">Annual Cashflow:</font></td>
                                                            <td align="right"><font color="#00FF00" id="rentalAnnualCashflow">$0</font></td>
                                                        </tr>
                                                        <tr bgcolor="#000066">
                                                            <td><font color="#FFFF00"><b>‚òÖ CASH-ON-CASH ‚òÖ</b></font></td>
                                                            <td align="right"><font size="4" color="#00FFFF"><b id="rentalCashOnCash">0%</b></font></td>
                                                        </tr>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>

                                    <!-- Flip Analysis -->
                                    <td width="50%" valign="top">
                                        <table border="5" cellpadding="10" cellspacing="0" width="100%" bgcolor="#330000" style="border-color: #FF0000;">
                                            <tr>
                                                <td align="center" bgcolor="#660000">
                                                    <font face="Comic Sans MS" color="#FFFF00" size="5">
                                                        <b>üî® FLIP ANALYSIS üî®</b>
                                                    </font>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <table border="0" cellpadding="5" cellspacing="0" width="100%" class="results-table">
                                                        <tr>
                                                            <td><font color="#00FFFF">ARV (Sale Price):</font></td>
                                                            <td align="right"><font color="#00FF00" id="flipARV">$0</font></td>
                                                        </tr>
                                                        <tr><td colspan="2"><hr color="#FF0000"></td></tr>
                                                        <tr>
                                                            <td><font color="#FF6666">Purchase Price:</font></td>
                                                            <td align="right"><font color="#FF0000" id="flipPurchase">-$0</font></td>
                                                        </tr>
                                                        <tr>
                                                            <td><font color="#FF6666">Repair Costs:</font></td>
                                                            <td align="right"><font color="#FF0000" id="flipRepairs">-$0</font></td>
                                                        </tr>
                                                        <tr>
                                                            <td><font color="#FF6666">Holding Costs:</font></td>
                                                            <td align="right"><font color="#FF0000" id="flipHolding">-$0</font></td>
                                                        </tr>
                                                        <tr>
                                                            <td><font color="#FF6666">Selling Costs (7%):</font></td>
                                                            <td align="right"><font color="#FF0000" id="flipSelling">-$0</font></td>
                                                        </tr>
                                                        <tr><td colspan="2"><hr color="#FF0000"></td></tr>
                                                        <tr>
                                                            <td><font color="#FFFF00"><b>Total Investment:</b></font></td>
                                                            <td align="right"><font color="#FF0000" id="flipTotalInvestment">-$0</font></td>
                                                        </tr>
                                                        <tr bgcolor="#660000">
                                                            <td><font color="#FFFF00"><b>‚òÖ NET PROFIT ‚òÖ</b></font></td>
                                                            <td align="right"><font size="5" color="#00FF00"><b id="flipProfit">$0</b></font></td>
                                                        </tr>
                                                        <tr bgcolor="#000066">
                                                            <td><font color="#FFFF00"><b>‚òÖ ROI ‚òÖ</b></font></td>
                                                            <td align="right"><font size="4" color="#00FFFF"><b id="flipROI">0%</b></font></td>
                                                        </tr>
                                                        <tr><td colspan="2"><hr color="#FF0000"></td></tr>
                                                        <tr>
                                                            <td><font color="#FF9900">MAO (70% Rule):</font></td>
                                                            <td align="right"><font color="#FF9900" id="flipMAO">$0</font></td>
                                                        </tr>
                                                        <tr bgcolor="#663300">
                                                            <td><font color="#FFFF00"><b>SUGGESTED OFFER:</b></font></td>
                                                            <td align="right"><font size="4" color="#FF00FF"><b id="flipSuggested">$0</b></font></td>
                                                        </tr>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>

                </table>

                <br><br>

                <!-- FOOTER -->
                <table border="3" cellpadding="10" cellspacing="0" width="90%" class="footer-table">
                    <tr>
                        <td align="center" bgcolor="#000000">
                            <font face="Courier New" color="#00FF00" size="2">
                                <marquee scrollamount="3">
                                    ‚òÖ The SLOPULATOR ‚òÖ ¬© 2024 ‚òÖ Best viewed in Netscape Navigator 4.0 at 800x600 ‚òÖ 
                                    <a href="mailto:bradley@brashproperties.com" style="color: #FF00FF;">SIGN MY GUESTBOOK!</a> ‚òÖ
                                </marquee>
                            </font>
                            <br><br>
                            <img src="https://web.archive.org/web/20090821124716/http://geocities.com/EnchantedForest/Dell/2347/underconstruction.gif" alt="Still Under Construction">
                            <br><br>
                            <font face="Comic Sans MS" color="#FF00FF" size="2">
                                <blink>‚òÖ Made with love for Bradley ‚òÖ</blink>
                            </font>
                            <br>
                            <div id="hit-counter-footer" class="hit-counter">
                                Hits: <span id="footer-hit-count">0000000</span>
                            </div>
                        </td>
                    </tr>
                </table>

                <br><br>

            </td>
        </tr>
    </table>

    <!-- Load Evaluation Modal -->
    <div id="loadModal" class="retro-modal">
        <table border="5" cellpadding="20" cellspacing="0" class="modal-table" bgcolor="#000033">
            <tr>
                <td align="center">
                    <font face="Comic Sans MS" color="#00FFFF" size="5">
                        <b>üìÇ LOAD SAVED EVALUATION üìÇ</b>
                    </font>
                    <br><br>
                    <span class="close-modal" onclick="closeModal()">[X] CLOSE</span>
                    <br><br>
                    <div id="evaluationsList"></div>
                </td>
            </tr>
        </table>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <table border="0" cellpadding="20">
            <tr>
                <td align="center">
                    <img src="https://web.archive.org/web/20091027045555/http://www.geocities.com/EnchantedForest/Dell/2347/construction-worker.gif" alt="Working..." class="loading-gif">
                    <br><br>
                    <font face="Comic Sans MS" color="#FFFF00" size="5">
                        <blink>üöß LOADING... PLEASE WAIT!!! üöß</blink>
                    </font>
                </td>
            </tr>
        </table>
    </div>

    <!-- Easter Egg Modal -->
    <div id="easterEggModal" class="retro-modal">
        <table border="5" cellpadding="20" cellspacing="0" bgcolor="#FF00FF">
            <tr>
                <td align="center">
                    <font face="Comic Sans MS" color="#FFFF00" size="6">
                        <b>üéâ YOU FOUND THE EASTER EGG!!! üéâ</b>
                    </font>
                    <br><br>
                    <font face="Papyrus" color="#000" size="5">
                        House Flipping = BIG PROFITS!!!
                    </font>
                    <br><br>
                    <img src="https://web.archive.org/web/20091027082445/http://www.geocities.com/televisioncity/5828/money.gif" alt="Money">
                    <br><br>
                    <button onclick="closeEasterEgg()" class="retro-button-small">OK COOL!</button>
                </td>
            </tr>
        </table>
    </div>

    <!-- COMP ME DADDY - Detailed Analysis Page -->
    <div id="compMeDaddyPage" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#000; z-index:9999; overflow-y:auto;">
        <table border="0" cellpadding="10" cellspacing="0" width="100%" height="100%">
            <tr>
                <td align="center" valign="top">
                    <br><br>
                    <table border="5" cellpadding="20" cellspacing="0" width="95%" bgcolor="#000033" style="border:8px ridge #FF00FF;">
                        <tr>
                            <td align="center">
                                <marquee behavior="alternate" scrollamount="10" bgcolor="#FF00FF">
                                    <font size="6" face="Comic Sans MS" color="#FFFF00">
                                        <b>üíéüíéüíé COMP ME DADDY - DETAILED ANALYSIS üíéüíéüíé</b>
                                    </font>
                                </marquee>
                                <br><br>
                                <font face="Papyrus" color="#00FFFF" size="4">
                                    <blink>‚òÖ DEEP DIVE INTO YOUR COMPS ‚òÖ</blink>
                                </font>
                                <br><br>
                                <button onclick="window.closeCompMeDaddy()" class="retro-button-small">
                                    <b>üëà BACK TO SLOPULATOR</b>
                                </button>
                            </td>
                        </tr>
                    </table>
                    
                    <br><br>
                    
                    <!-- ADDRESS INPUT SECTION -->
                    <table border="5" cellpadding="15" cellspacing="0" width="95%" bgcolor="#330033" style="border:5px ridge #FF00FF;">
                        <tr>
                            <td align="center">
                                <font face="Comic Sans MS" color="#00FFFF" size="5">
                                    <b>üîç ENTER PROPERTY ADDRESS üîç</b>
                                </font>
                                <br><br>
                                <input type="text" id="compMeDaddyAddress" class="retro-input" placeholder="e.g., 123 Main St, Evansville, IN" size="50">
                                <br><br>
                                <button id="compMeDaddySearchBtn" class="retro-button" onclick="console.log('Analyze Comps clicked'); window.runCompMeDaddyAnalysis();">
                                    <b>üîé ANALYZE COMPS üîé</b>
                                </button>
                                <div id="compMeDaddySuggestions" class="suggestions"></div>
                            </td>
                        </tr>
                    </table>
                    
                    <br><br>
                    
                    <!-- RentCast AVM Section -->
                    <table border="5" cellpadding="15" cellspacing="0" width="95%" bgcolor="#000066" style="border:5px groove #00FF00;">
                        <tr>
                            <td align="center">
                                <font face="Comic Sans MS" color="#FFFF00" size="5">
                                    <b>üè¶ RENTCAST AVM - AUTOMATED VALUATION üè¶</b>
                                </font>
                                <br><br>
                                <div id="rentcastAVMLoading">
                                    <font color="#00FF00" face="Courier New">Loading RentCast data...</font>
                                    <br>
                                    <img src="https://web.archive.org/web/20091027082445/http://www.geocities.com/televisioncity/5828/computer.gif" alt="Loading">
                                </div>
                                <div id="rentcastAVMData" style="display:none;">
                                    <table border="2" cellpadding="10" cellspacing="0" width="100%">
                                        <tr>
                                            <td bgcolor="#330033" align="center">
                                                <font color="#FF00FF" face="Comic Sans MS" size="4"><b>RENTCAST ESTIMATE</b></font>
                                                <br>
                                                <font color="#00FFFF" size="6" id="rentcastEstimate">$0</font>
                                            </td>
                                            <td bgcolor="#330033" align="center">
                                                <font color="#FF00FF" face="Comic Sans MS" size="4"><b>CONFIDENCE</b></font>
                                                <br>
                                                <font color="#00FF00" size="6" id="rentcastConfidence">HIGH</font>
                                            </td>
                                            <td bgcolor="#330033" align="center">
                                                <font color="#FF00FF" face="Comic Sans MS" size="4"><b>PRICE RANGE</b></font>
                                                <br>
                                                <font color="#FFFF00" size="5" id="rentcastRange">$0 - $0</font>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </td>
                        </tr>
                    </table>
                    
                    <br><br>
                    
                    <!-- AVM Justification -->
                    <div id="avmJustification" style="display:none;"></div>
                    
                    <br><br>
                    
                    <!-- Top 5 Comps Dashboard -->
                    <div id="compsDashboard" style="display:none;"></div>
                    
                    <br><br>
                    
                    <!-- Share Link -->
                    <div id="shareLinkContainer" style="display:none;"></div>
                    
                    <br><br>
                    
                    <!-- Detailed Comps Table -->
                    <table border="5" cellpadding="15" cellspacing="0" width="95%" bgcolor="#000033" style="border:5px ridge #00FFFF;">
                        <tr>
                            <td align="center">
                                <font face="Comic Sans MS" color="#00FFFF" size="5">
                                    <b>üìä DETAILED COMP ANALYSIS üìä</b>
                                </font>
                                <br><br>
                                <table border="3" cellpadding="8" cellspacing="0" width="100%" id="detailedCompsTable">
                                    <thead>
                                        <tr bgcolor="#330066">
                                            <th><font color="#FFFF00">ADDRESS</font></th>
                                            <th><font color="#FFFF00">PRICE</font></th>
                                            <th><font color="#FFFF00">$/SQFT</font></th>
                                            <th><font color="#FFFF00">DATE</font></th>
                                            <th><font color="#FFFF00">MILES</font></th>
                                            <th><font color="#FFFF00">CORRELATION</font></th>
                                            <th><font color="#FFFF00">FINISH</font></th>
                                        </tr>
                                    </thead>
                                    <tbody id="detailedCompsBody">
                                        <!-- Populated by JS -->
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </table>
                    
                    <br><br>
                    
                    <!-- Property Take - Valuation Opinion -->
                    <table border="5" cellpadding="15" cellspacing="0" width="95%" bgcolor="#1a1a2e" style="border:5px groove #ffd700;">
                        <tr>
                            <td align="center">
                                <font face="Comic Sans MS" color="#ffd700" size="5">
                                    <b>üéØ THE TAKE - PROPERTY VALUATION üéØ</b>
                                </font>
                                <br><br>
                                <div id="propertyTake" style="text-align:left;">
                                    <font color="#00FF00" face="Courier New">Analyzing property value...</font>
                                </div>
                            </td>
                        </tr>
                    </table>
                    
                    <br><br>
                    
                    <!-- Map View -->
                    <table border="5" cellpadding="15" cellspacing="0" width="95%" bgcolor="#000033" style="border:5px ridge #FF00FF;">
                        <tr>
                            <td align="center">
                                <font face="Comic Sans MS" color="#FF00FF" size="5">
                                    <b>üó∫Ô∏è LOCATION MAP - PROXIMITY VIEW üó∫Ô∏è</b>
                                </font>
                                <br><br>
                                <div id="compMap" style="width:100%; height:450px; border:3px solid #FF00FF; border-radius:10px;"></div>
                            </td>
                        </tr>
                    </table>
                    
                    <br><br>
                    
                    <!-- Bottom CTA -->
                    <button onclick="window.closeCompMeDaddy()" class="retro-button">
                        <b>üëà BACK TO SLOPULATOR</b>
                    </button>
                    <br><br>
                </td>
            </tr>
        </table>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="app.js?v=1014"></script>
</body>
</html>